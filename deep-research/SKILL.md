---
name: deep-research
description: >
  Deep Research skill - Multi-source investigation across X (Twitter), Web, and academic papers using team agents.
  Use this skill when the user asks for deep research, comprehensive investigation, multi-perspective analysis,
  or hypothesis building on any topic. Triggers on phrases like "deep research", "investigate thoroughly",
  "research across sources", "ディープリサーチ", or requests for fact-based analysis with original hypotheses.
  Conducts 6-phase research: needs analysis, X preliminary research, parallel web deep-dive (3 agents),
  information integration, hypothesis construction, and final report delivery.
---

# Deep Research - チームエージェントによるディープリサーチ

あなたはディープリサーチのオーケストレーターです。ユーザーの調査テーマについて、チームエージェントを使って徹底的な調査を行い、事実に基づく分析と独自の仮説を構築します。

**重要**: 各フェーズを順番に実行してください。前のフェーズの結果を次のフェーズに活かすことが重要です。

---

## Phase 1: ニーズの深掘り（ヒアリング）

**目的**: ユーザーが本当に知りたいことを明確にする

AskUserQuestionツールを使って、以下の観点から**具体的かつ詳細な質問**を行う。質問は多くても構わない（4〜8問程度）。ユーザーのニーズを徹底的に聞き出す。

質問すべき観点：
- **テーマの具体化**: 「〇〇について」の「〇〇」をさらに絞り込む質問
- **目的・用途**: なぜこの情報が必要か？意思決定のため？学習のため？ビジネスのため？
- **既知の情報**: ユーザーが既に知っていることは何か？（重複を避ける）
- **関心の焦点**: 技術面？ビジネス面？社会的影響？規制面？
- **時間軸**: 最新の動向？歴史的経緯？将来予測？
- **深さの期待**: 概要レベル？専門家レベル？
- **特に知りたい人物・組織**: 注目している専門家やプレイヤーはいるか？
- **対立する見解への関心**: ポジティブな面だけ？リスクや批判も含めて？

AskUserQuestionでは一度に最大4問までしか聞けないため、必要に応じて複数回に分けて質問する。
最初の回答を受けて、さらに深掘りする追加質問を行うことも検討する。

ヒアリングが完了したら、**調査計画（リサーチプラン）** を作成してユーザーに提示する：
- 調査の論点（3〜6個）
- 各論点で調べること
- 使用する情報源の方針

ユーザーの承認を得てから次のフェーズに進む。

---

## Phase 2: X（Twitter）先行調査

**目的**: Xで専門家の動向・論点を把握し、深掘り調査の方向性を定める

### 2-1. チームの作成

TeamCreateツールでリサーチチームを作成する。チーム名は `deep-research` とする。

### 2-2. X調査タスクの作成

Phase 1のリサーチプランに基づき、X調査用のタスクをTaskCreateで作成する。

### 2-3. Xリサーチャーの起動

**Xリサーチャー**を1体起動する（Taskツール）：

```
subagent_type: general-purpose
name: x-researcher
team_name: deep-research
```

プロンプトには以下を含める：
- 調査テーマと論点の詳細
- birdスキルを使ったX検索の指示（`/bird` スキルを呼び出して使う）
- 検索クエリの工夫（日本語・英語両方、関連ハッシュタグ、専門家のアカウント名）
- 各論点について最低5〜10件の有用な投稿を見つけること
- 以下を特に重点的に調査すること：
  - その分野の専門家・インフルエンサーが**何に注目しているか**
  - 専門家間で**意見が分かれているポイント**
  - 言及されている**論文・記事・レポート・イベント**の具体名
  - **新しいトレンドや転換点**を示唆する発言
  - **キーパーソン**とその立場・所属
- 発見した情報をスクラッチパッドにmarkdownで整理して保存すること
- 出典（ツイートURL、投稿者名）を必ず記録すること
- **タスクリストから自分のタスクを取得し、完了したらTaskUpdateで完了にすること**

### 2-4. X調査結果の待機と分析

Xリサーチャーの完了を待ち、スクラッチパッドに保存された調査結果を読み込む。

結果を分析し、以下を整理する：
- **発見された主要な論点・トピック**のリスト
- **深掘りすべき具体的な対象**（論文名、技術名、企業名、人物名など）
- **情報の空白地帯**（Xだけでは分からなかったこと）
- **矛盾する情報や意見の対立点**（裏取りが必要な箇所）

---

## Phase 3: 戦略的Web深掘り調査（3エージェント並列）

**目的**: X調査で見えた方向性を基に、3つのWebリサーチャーで並列に深掘りする

### 3-1. リサーチ戦略の策定

Phase 2のX調査結果を基に、3つのWebリサーチャーに**それぞれ異なる調査軸**を割り当てる。

割り当ての考え方（テーマに応じて柔軟に調整する）：

**パターンA: 切り口別分担**
- リサーチャー1: 技術・学術面（論文、技術仕様、実験データ）
- リサーチャー2: ビジネス・市場面（市場データ、企業動向、事例）
- リサーチャー3: 社会・規制面（政策、倫理、社会的影響）

**パターンB: 論点別分担**
- リサーチャー1: X調査で最も注目度の高かった論点を深掘り
- リサーチャー2: 専門家間で意見が割れている論点の裏取り
- リサーチャー3: Xでは見えなかった空白地帯の調査

**パターンC: 情報源別分担**
- リサーチャー1: 学術論文・研究レポート特化
- リサーチャー2: ニュース記事・業界レポート特化
- リサーチャー3: 公的機関・統計データ特化

どのパターンを採用するか、またはカスタムの分担にするかは、X調査の結果とユーザーの関心に基づいて判断する。策定したリサーチ戦略をユーザーに共有し、承認を得る。

### 3-2. Web調査タスクの作成

3つのリサーチャーそれぞれの調査範囲に対応するタスクをTaskCreateで作成する。

### 3-3. 3つのWebリサーチャーを並列起動

**Webリサーチャー1**（Taskツール）：
```
subagent_type: general-purpose
name: web-researcher-1
team_name: deep-research
```

**Webリサーチャー2**（Taskツール）：
```
subagent_type: general-purpose
name: web-researcher-2
team_name: deep-research
```

**Webリサーチャー3**（Taskツール）：
```
subagent_type: general-purpose
name: web-researcher-3
team_name: deep-research
```

各リサーチャーのプロンプトには以下を含める：
- 調査テーマの全体像
- **X調査で判明した重要な情報**（具体的な論文名、人物名、技術名など）
- **このリサーチャーに割り当てられた調査軸と具体的な調査項目**
- WebSearchとWebFetchを使った調査の指示
- 調査の優先順位（X調査で言及されたものを最優先で裏取り）
- 信頼性の高い情報源を優先（学術論文、公的機関、業界団体）
- 発見した情報をスクラッチパッドにmarkdownで整理して保存すること
- 出典（URL、著者名、発行年）を必ず記録すること
- **タスクリストから自分のタスクを取得し、完了したらTaskUpdateで完了にすること**

### 3-4. 調査の監督

- 3エージェントの進捗をTaskListで確認する
- 必要に応じてSendMessageで追加の指示や調査方向の修正を行う
- 全エージェントの完了を待つ

---

## Phase 4: 情報の統合と分析

**目的**: X調査 + Web深掘り調査の全情報を事実ベースで整理・統合する

### 4-1. 情報の収集

Xリサーチャーと3つのWebリサーチャーがスクラッチパッドに保存した調査結果をすべて読み込む。

### 4-2. ファクトベースの整理

以下の構造でmarkdownファイルとして作成する（ファイルパス: `~/deep-research-[テーマの短縮名]-[YYYYMMDD].md`）。
Writeツールを使ってファイルを保存し、ファイルパスをユーザーに伝える。

```markdown
# ディープリサーチレポート: [テーマ]

## エグゼクティブサマリー
[3〜5行で全体を要約]

## 1. 調査の背景と目的
[ユーザーの問いとリサーチプランの要約]

## 2. 事実の整理

### 2.1 [論点1]
#### 確認された事実
- [事実1]（出典: ...）
- [事実2]（出典: ...）

#### 専門家の見解
- [専門家A]の見解: ...（出典: X投稿/論文）
- [専門家B]の見解: ...（出典: X投稿/論文）

#### データ・統計
- [データ1]（出典: ...）

### 2.2 [論点2]
[同様の構造]

...

### 2.N [論点N]
[同様の構造]

## 3. 論点間の関連性と全体像
[複数の論点を横断して見えてくるパターンや構造]

## 4. 意見の対立点
[専門家間で見解が分かれているポイントとその根拠]

## 5. 情報の信頼性評価
[各情報源の信頼性と、情報が不足している領域の明示]
```

**重要な原則**:
- 事実と意見を明確に区別する
- すべての情報に出典を付ける
- 不確実な情報には「〜とされている」「〜との見方がある」等の表現を使う
- 情報が矛盾する場合は両方を併記する

---

## Phase 5: 仮説の構築

**目的**: 収集した事実を基に、一歩進んだ独自の仮説を構築する

Phase 4の事実整理を踏まえ、以下の思考プロセスで仮説を構築する：

### 5-1. パターン認識
- 複数の事実から見えてくる共通パターンは何か？
- 専門家が見落としている視点はないか？
- 異なる分野の知見を組み合わせると何が見えるか？

### 5-2. 仮説の提示

Phase 4のファクトレポートとは**別ファイル**で仮説レポートを作成する（ファイルパス: `~/deep-research-[テーマの短縮名]-hypothesis-[YYYYMMDD].md`）。
Writeツールを使ってファイルを保存し、ファイルパスをユーザーに伝える。

```markdown
# 仮説レポート: [テーマ]

> ファクトレポート: [Phase 4で作成したファイルパスへの参照]

## 独自の仮説と考察

### 仮説1: [タイトル]
**主張**: [一文で仮説を述べる]

**考察**:
[事実の組み合わせからどのような新しい視点が見えるか、なぜそう考えるかを自由に論じる。
専門家が見落としている視点、異なる分野の知見の接続、時系列から読み取れる変化の方向性など、
あなたの推論力を最大限に活かして踏み込んだ洞察を展開する。]

**この仮説が正しい場合の含意**:
- [含意1]
- [含意2]

### 仮説2: [タイトル]
[同様の構造]

...

## 7. 今後の調査提案
[さらに深掘りすべきポイントと推奨される調査方法]

## 8. 出典一覧
[すべての出典をリスト化]
```

### 5-3. 仮説の品質基準
- **独自性**: 単なる情報の要約ではなく、組み合わせによる新しい洞察
- **論理の透明性**: 事実からどう推論したかのプロセスを明示
- **実用性**: ユーザーの目的に沿った実行可能な示唆を含む
- **踏み込み**: 安全な一般論に留まらず、あなたなりの一歩進んだ見解を述べる

---

## Phase 6: レポートの提出

最終レポートをユーザーに提示する。

提示後、以下を確認する：
- 追加で調べてほしいことはないか？
- 特定の仮説について深掘りしたいか？
- レポートの形式や詳細度は適切か？

チームエージェントのシャットダウンとクリーンアップを行う。
